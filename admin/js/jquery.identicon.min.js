/**
 * Identicon.js v1.0
 * http://github.com/stewartlord/identicon.js
 *
 * Requires PNGLib
 * http://www.xarg.org/download/pnglib.js
 *
 * Copyright 2013, Stewart Lord
 * Released under the BSD license
 * http://www.opensource.org/licenses/bsd-license.php
 */

!function(){Identicon=function(a,b,c){this.hash=a,this.size=b||64,this.margin=c||.08},Identicon.prototype={hash:null,size:null,margin:null,render:function(){var i,j,a=this.hash,b=this.size,c=Math.floor(b*this.margin),d=Math.floor((b-2*c)/5),e=new PNGlib(b,b,256),f=e.color(255,255,255),g=this.hsl2rgb(parseInt(a.substr(-7),16)/268435455,.5,.7),h=e.color(255*g[0],255*g[1],255*g[2]);for(i=0;15>i;i++)j=parseInt(a.charAt(i),16)%2?f:h,5>i?this.rectangle(2*d+c,i*d+c,d,d,j,e):10>i?(this.rectangle(1*d+c,(i-5)*d+c,d,d,j,e),this.rectangle(3*d+c,(i-5)*d+c,d,d,j,e)):15>i&&(this.rectangle(0*d+c,(i-10)*d+c,d,d,j,e),this.rectangle(4*d+c,(i-10)*d+c,d,d,j,e));return e},rectangle:function(a,b,c,d,e,f){var g,h;for(g=a;a+c>g;g++)for(h=b;b+d>h;h++)f.buffer[f.index(g,h)]=e},hsl2rgb:function(a,b,c){return a*=6,b=[c+=b*=.5>c?c:1-c,c-2*a%1*b,c-=b*=2,c,c+a%1*b,c+b],[b[~~a%6],b[(16|a)%6],b[(8|a)%6]]},toString:function(){return this.render().getBase64()}},window.Identicon=Identicon}();